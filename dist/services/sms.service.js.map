{"version":3,"sources":["../../src/services/sms.service.ts"],"sourcesContent":["import { CustomError } from '@exceptions/CustomError';\nimport axios from 'axios';\nimport { CRM_API_URL, SMS_SERVICE_SECRET } from '@config';\n\nasync function sendSMS(phone, msg) {\n  const url = `${CRM_API_URL}/customer/send-sms`;\n  const options = {\n    method: 'POST',\n    url: url,\n    headers: {\n      secret: SMS_SERVICE_SECRET,\n    },\n    data: {\n      phone,\n      msg,\n    },\n  };\n  const axiosResponse = await axios(options);\n  if (axiosResponse.data.error) {\n    throw new CustomError(axiosResponse.data.error.name);\n  }\n  return axiosResponse;\n}\n\nexport async function sendVerification(phone, code) {\n  try {\n    const msg = `AttoPay: this is your verification code: ${code}`;\n    return await sendSMS(phone, msg);\n  } catch (error) {\n    throw new CustomError(error.message);\n  }\n}\n"],"names":["sendVerification","sendSMS","phone","msg","url","CRM_API_URL","options","method","headers","secret","SMS_SERVICE_SECRET","data","axiosResponse","axios","error","CustomError","name","code","message"],"mappings":";;;;+BAwBsBA;;;eAAAA;;;6BAxBM;8DACV;wBAC8B;;;;;;AAEhD,eAAeC,QAAQC,KAAK,EAAEC,GAAG;IAC/B,MAAMC,MAAM,CAAC,EAAEC,mBAAW,CAAC,kBAAkB,CAAC;IAC9C,MAAMC,UAAU;QACdC,QAAQ;QACRH,KAAKA;QACLI,SAAS;YACPC,QAAQC,0BAAkB;QAC5B;QACAC,MAAM;YACJT;YACAC;QACF;IACF;IACA,MAAMS,gBAAgB,MAAMC,IAAAA,cAAK,EAACP;IAClC,IAAIM,cAAcD,IAAI,CAACG,KAAK,EAAE;QAC5B,MAAM,IAAIC,wBAAW,CAACH,cAAcD,IAAI,CAACG,KAAK,CAACE,IAAI;IACrD;IACA,OAAOJ;AACT;AAEO,eAAeZ,iBAAiBE,KAAK,EAAEe,IAAI;IAChD,IAAI;QACF,MAAMd,MAAM,CAAC,yCAAyC,EAAEc,KAAK,CAAC;QAC9D,OAAO,MAAMhB,QAAQC,OAAOC;IAC9B,EAAE,OAAOW,OAAO;QACd,MAAM,IAAIC,wBAAW,CAACD,MAAMI,OAAO;IACrC;AACF"}