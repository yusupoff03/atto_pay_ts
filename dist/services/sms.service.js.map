{"version":3,"sources":["../../src/services/sms.service.ts"],"sourcesContent":["import { CustomError } from '@exceptions/CustomError';\nimport axios from 'axios';\nimport { CRM_API_URL, SMS_SERVICE_SECRET } from '@config';\n\nasync function sendSMS(phone, msg) {\n  const url = `${CRM_API_URL}/customer/send-sms`;\n  const options = {\n    method: 'POST',\n    url: url,\n    headers: {\n      secret: SMS_SERVICE_SECRET,\n    },\n    data: {\n      phone,\n      msg,\n    },\n  };\n  return await axios(options);\n}\n\nexport async function sendVerification(phone, code) {\n  try {\n    const msg = `AttoPay: this is your verification code: ${code}`;\n    const response = await sendSMS(phone, msg);\n    return response;\n  } catch (error) {\n    throw new CustomError(error.message);\n  }\n}\n"],"names":["sendVerification","sendSMS","phone","msg","url","CRM_API_URL","options","method","headers","secret","SMS_SERVICE_SECRET","data","axios","code","response","error","CustomError","message"],"mappings":";;;;+BAoBsBA;;;eAAAA;;;6BApBM;8DACV;wBAC8B;;;;;;AAEhD,eAAeC,QAAQC,KAAK,EAAEC,GAAG;IAC/B,MAAMC,MAAM,CAAC,EAAEC,mBAAW,CAAC,kBAAkB,CAAC;IAC9C,MAAMC,UAAU;QACdC,QAAQ;QACRH,KAAKA;QACLI,SAAS;YACPC,QAAQC,0BAAkB;QAC5B;QACAC,MAAM;YACJT;YACAC;QACF;IACF;IACA,OAAO,MAAMS,IAAAA,cAAK,EAACN;AACrB;AAEO,eAAeN,iBAAiBE,KAAK,EAAEW,IAAI;IAChD,IAAI;QACF,MAAMV,MAAM,CAAC,yCAAyC,EAAEU,KAAK,CAAC;QAC9D,MAAMC,WAAW,MAAMb,QAAQC,OAAOC;QACtC,OAAOW;IACT,EAAE,OAAOC,OAAO;QACd,MAAM,IAAIC,wBAAW,CAACD,MAAME,OAAO;IACrC;AACF"}